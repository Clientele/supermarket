(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc5bc830"],{"767f":function(t,e,n){},"7c34":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"page-user-view"}},[n("vs-card",[n("div",{staticClass:"px-6 py-6"},[n("div",{staticClass:"flex flex-wrap items-center mb-6"},[n("div",{staticClass:"flex-grow"},[n("div",{staticClass:"flex flex-wrap "},[n("h2",{staticClass:"font-bold",staticStyle:{"line-height":"48px !important",display:"flex","vertical-align":"middle !important"}},[t._v("\n             "+t._s(t.staff.staff_name)+" Â  "),n("span",{staticStyle:{"font-weight":"lighter"}},[t._v(" Stock ")])]),n("vs-button",{staticClass:"py-0 ml-4",attrs:{icon:"refresh",type:"flat"},on:{click:function(e){return t.fetchTruckedStock()}}},[t._v("Refresh")])],1)])]),n("vs-table",{attrs:{stripe:"",data:t.truckedStock},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,s){return n("vs-tr",{key:s},[n("vs-td",[t._v("\n             "+t._s(a[s].product?a[s].product.product_name:" ")+"\n             ("+t._s(a[s].variant?a[s].variant.variant_name:" ")+")\n           ")]),n("vs-td",[t._v(" "+t._s(a[s].created_at))]),n("vs-td",[t._v(" "+t._s(a[s].received_quantity))]),n("vs-td",[t._v(" "+t._s(a[s].remaining_quantity))]),n("vs-td",[n("vs-progress",{attrs:{height:12,percent:a[s].remaining_quantity/a[s].received_quantity*100,color:e.remaining_quantity/e.received_quantity>.3?"success":"danger"}})],1)],1)}))}}])},[n("template",{slot:"thead"},[n("vs-th",[t._v("Product ")]),n("vs-th",[t._v("Reception Date")]),n("vs-th",[t._v("Received QTY")]),n("vs-th",[t._v("Remaining QTY")]),n("vs-th",[t._v("Remaining")]),n("vs-th")],1)],2)],1)])],1)},s=[],c=n("bb36"),i=n("4a7a"),o=n.n(i),r=n("fa33"),d={components:{vSelect:o.a,Datepicker:r["a"]},props:{staff:Object},data:function(){return{user_data:null,productsVariants:[],rolesAvailable:[],selectedVariant:{},staffStatus:["Active","Suspended"],stockFormVisible:!1,depotStockInstance:{depot_id:null,product_variant_id:null,received_quantity:null,batch_number:null,expiry_date:null},variantBatchesVisible:!1,truckedStock:[]}},watch:{staff:function(t){this.fetchTruckedStock()}},computed:{validateForm:function(){return!this.errors.any()}},methods:{closeProductVariants:function(){this.$emit("closeProductVariants")},fetchTruckedStock:function(){var t=this;console.log("Fetching trucked stock..");var e="/products/inventory/stock/mobile/staff?staff_id="+this.staff.id;c["a"].get(e).then((function(e){t.truckedStock=e.data.payload.trucked_stock.data})).catch((function(t){console.log(t)}))},showStockReceptionForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selectedVariant=t,this.stockFormVisible=!0},closeStockForm:function(){this.stockFormVisible=!1},saveReceivedStock:function(){var t=this;this.depotStockInstance.depot_id=this.depot.id,this.depotStockInstance.product_variant_id=this.selectedVariant.id,console.log(JSON.stringify(this.depotStockInstance));var e="/products/inventory/stock/receive";c["a"].post(e,this.depotStockInstance).then((function(e){t.stockFormVisible=!1,t.depotStockInstance={},t.fetchTruckedStock()})).catch((function(e){var n="Something went wrong";e.response&&(n=e.response.data.message),t.$vs.loading.close(),t.$vs.notify({time:12e3,color:"danger",title:"Failed",text:n}),console.log(e)}))},fetchTruckedStockBreakdown:function(){var t=this;console.log("Fetching variants stock breakdown..");var e="products/inventory/stock/variant/breakdown?variant_id="+this.selectedVariant.id;c["a"].get(e).then((function(e){t.truckedStock=e.data.success?e.data.payload.depot_products:[]})).catch((function(t){console.log(t)}))},showStockBatchBreakdown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selectedVariant=t,this.variantBatchesVisible=!0,this.fetchTruckedStockBreakdown()},closeStockBatchBreakdown:function(){this.variantBatchesVisible=!1}},created:function(){},mounted:function(){null!=this.staff?this.fetchTruckedStock():(console.log("No staff passed, returning"),this.$router.go(-1))}},l=d,u=(n("8626"),n("2877")),v=Object(u["a"])(l,a,s,!1,null,"fbdcc4d8",null);e["default"]=v.exports},8626:function(t,e,n){"use strict";n("767f")}}]);
//# sourceMappingURL=chunk-fc5bc830.c82cc403.js.map