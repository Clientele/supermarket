{"version":3,"sources":["webpack:///./src/http/handler.js","webpack:///./src/views/products/inventory/requests/RequestDetails.vue?eb05","webpack:///./src/views/products/inventory/requests/RequestDetails.vue?3c9a","webpack:///src/views/products/inventory/requests/RequestDetails.vue","webpack:///./src/views/products/inventory/requests/RequestDetails.vue?154c","webpack:///./src/views/products/inventory/requests/RequestDetails.vue?728b"],"names":["parseError","statusCode","handle","error","response","console","log","JSON","stringify","data","message","status","router","push","catch","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_v","stockRequest","on","$event","approveRequest","_s","selectedRequest","staff","staff_name","request_products","showDispatchForm","scopedSlots","_u","key","fn","ref","_l","item","rowIndex","product","product_name","variant","variant_name","quantity","approved","class","dispatched_quantity","model","value","callback","$$v","selectedStockRequestProduct","expression","slot","dispatchFormDialog","selectedDepotProduct","dispatchProduct","dispatchQuantity","_e","remaining_quantity","depotProduct","index","availableStockProducts","length","staticRenderFns","props","components","vSelect","stockRequests","productInstance","productFormDialog","placesVisible","placesFormVisible","placeInstance","places","productCategoriesArray","title","id","selected_category","selected_category_id","sub_categories","availableVendors","selectedVendor","assignedCategories","productVariantsVisible","availableCategories","selectedCategory","availableDepots","selectedDepot","methods","fetchStockRequestDetails","axios","happilyNotify","getAvailableProducts","sadlyNotify","requested_product_id","depot_id","depot_product_id","fetchAvailableCategories","fetchAvailableVendors","fetchAvailableDepots","info","handleApiError","$vs","notify","text","iconPack","icon","color","created","$router","go","mounted","component"],"mappings":"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","file":"js/chunk-789a95c4.626e5e47.js","sourcesContent":["import router from '@/router'\n\nfunction parseError(statusCode) {\n  switch (statusCode) {\n    case 400:\n    {\n      return \"Server could not understand the request\";\n    }break;\n\n    case 401:\n    {\n      return \"You have not logged in\";\n    }break;\n\n    case 402:\n    {\n      return \"Payment required\";\n    }break;\n\n    case 403:\n    {\n      return \"Resource is forbbidden\";\n    }\n      break;\n    case 404:\n    {\n      return \"URL/Resource Not found\";\n    }\n      break;\n    case 405:\n    {\n      return \"Request method not allowed\";\n    }\n      break;\n    case 406:\n    {\n      return \"Not Acceptable\";\n    }\n      break;\n    case 407:\n    {\n      return \"Proxy authentication required\";\n    }\n      break;\n\n    case 408:\n    {\n      return \"Request timeout\";\n    }\n      break;\n    case 413:\n    {\n      return \"Payload Too Large\";\n    }\n      break;\n\n    case 415:\n    {\n      return \"Unsupported Media Type\";\n    }\n      break;\n\n    case 413:\n    {\n      return \"Payload Too Large\";\n    }break;\n    case 422:\n    {\n      return \"Could not process request\";\n    }break;\n\n    case 429:\n    {\n      return \"Too Many Requests\";\n    }\n      break;\n\n/// 5xx\n    case 500:\n    {\n      return \"Internal Server Error\";\n    }\n      break;\n\n    case 504:\n    {\n      return \"Gateway Timeout\";\n    }\n      break;\n\n    case 504:\n    {\n      return \"Network Authentication Required\";\n    }\n      break;\n\n    default:\n      return \"Error Code:\"+statusCode\n  }\n}\n\nexport function handle(error) {\n\n   if(error.response){\n     console.log(JSON.stringify(error.response.data.message));\n\n     if(error.response.status==401){\n      console.log(\"redirecting....\");\n       router.push('/login').catch(() => {})\n      return \"Not logged in\";\n    }else{\n     let message = error.response.data? error.response.data.message:   error.response.message;\n     return message+\" -\"+parseError(error.response.status ) ;\n    }\n\n   }else{\n    console.log(error);\n  }\n\n  return \"An error occurred\"\n\n}\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequestDetails.vue?vue&type=style&index=0&id=9de7d256&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"flex flex-wrap items-center mb-6\"},[_c('div',{staticClass:\"flex-grow\"},[_c('div',{staticClass:\"flex flex-wrap \"},[_c('h2',{staticClass:\"font-bold\",staticStyle:{\"line-height\":\"48px !important\",\"display\":\"flex\",\"vertical-align\":\"middle !important\"}},[_c('vs-icon',{staticClass:\"inline pt-2 mr-4\",attrs:{\"size\":\"32px\",\"icon\":\"subject\"}}),_vm._v(\"\\n          Request Details\\n        \")],1)])]),(!(_vm.stockRequest.approved))?_c('vs-button',{attrs:{\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.approveRequest()}}},[_vm._v(\"Approve\")]):_c('vs-chip',{attrs:{\"color\":\"success\"}},[_vm._v(\"Approved\")])],1),_c('vx-card',[_c('div',{staticClass:\"px-6 py-6 rounded\"},[_c('div',{staticClass:\"flex flex-wrap \"},[_c('h4',{staticStyle:{\"line-height\":\"48px !important\",\"display\":\"flex\",\"vertical-align\":\"middle !important\"}},[_c('vs-icon',{staticClass:\"inline pt-2 mr-4\",attrs:{\"size\":\"32px\",\"icon\":\"person\"}}),_vm._v(\"\\n          \"+_vm._s(_vm.selectedRequest.staff? _vm.selectedRequest.staff.staff_name : \"Unknown Staff\")+\"\\n        \")],1)]),_c('vs-table',{attrs:{\"stripe\":\"\",\"data\":_vm.stockRequest.request_products},on:{\"selected\":function($event){return _vm.showDispatchForm()}},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _vm._l((data),function(item,rowIndex){return _c('vs-tr',{key:rowIndex,attrs:{\"data\":item}},[_c('vs-td',[_vm._v(\"\\n              \"+_vm._s(item.product ? item.product.product_name : \"No Product Name\")+\"\\n            \")]),_c('vs-td',[_vm._v(\"\\n              \"+_vm._s(item.variant ? item.variant.variant_name : \"No Name\")+\"\\n            \")]),_c('vs-td',[_vm._v(\"\\n              \"+_vm._s(item.quantity)+\"\\n            \")]),_c('vs-td',[_c('vs-chip',{attrs:{\"color\":item.approved? \"#cdf7ec\":\"#cdf7ec\"}},[_c('span',{class:item.approved>0? \"success-text\":\"success-text\",staticStyle:{\"font-weight\":\"bold\",\"margin-left\":\"4px\"}},[_vm._v(\"\\n                  \"+_vm._s(item.dispatched_quantity)+\"\\n                 \")])])],1),_c('vs-td',[_c('vs-chip',{attrs:{\"color\":(item.quantity - item.dispatched_quantity)<=0? \"#cdf7ec\":\"#fff4f6\"}},[_c('span',{class:(item.quantity - item.dispatched_quantity)<=0? \"success-text\":\"danger-text\",staticStyle:{\"font-weight\":\"bold\",\"margin-left\":\"4px\"}},[_vm._v(\"\\n                  \"+_vm._s((item.quantity - item.dispatched_quantity))+\"\\n                 \")])])],1)],1)})}}]),model:{value:(_vm.selectedStockRequestProduct),callback:function ($$v) {_vm.selectedStockRequestProduct=$$v},expression:\"selectedStockRequestProduct\"}},[_c('template',{slot:\"thead\"},[_c('vs-th',[_vm._v(\"Product \")]),_c('vs-th',[_vm._v(\"Variant \")]),_c('vs-th',[_vm._v(\"Requested  \")]),_c('vs-th',[_vm._v(\"Dispatched \")]),_c('vs-th',[_vm._v(\"Remaining \")])],1)],2)],1),_c('vs-prompt',{attrs:{\"title\":\"Dispatch\",\"accept-text\":\"Dispatch\",\"cancel-text\":\"Cancel\",\"color\":\"#118ab2\",\"active\":_vm.dispatchFormDialog},on:{\"cancel\":function($event){_vm.selectedDepotProduct= null},\"accept\":function($event){return _vm.dispatchProduct()},\"update:active\":function($event){_vm.dispatchFormDialog=$event}}},[(_vm.selectedDepotProduct)?_c('h4',{staticClass:\"my-6\"},[_vm._v(\"Quantity to dispatch\")]):_c('h4',{staticClass:\"my-6\"},[_vm._v(\"Select depot stock\")]),(_vm.selectedDepotProduct)?_c('div',{staticClass:\"mb-6\"},[_c('vs-input',{staticClass:\"mt-3 w-full\",attrs:{\"placeholder\":\"Quantity\",\"vs-placeholder\":\"Quantity\"},model:{value:(_vm.dispatchQuantity),callback:function ($$v) {_vm.dispatchQuantity=$$v},expression:\"dispatchQuantity\"}})],1):_vm._e(),(_vm.selectedDepotProduct)?_c('div',{staticClass:\"product-item-active\"},[_c('p',[_vm._v(\"\\n          \"+_vm._s(_vm.selectedDepotProduct.product? _vm.selectedDepotProduct.product.product_name : \"\")+\"\\n          \"+_vm._s(_vm.selectedDepotProduct.variant? _vm.selectedDepotProduct.variant.variant_name : \"\")+\"\\n        \")]),_c('p',[_vm._v(\"Remaining: \"+_vm._s(_vm.selectedDepotProduct.remaining_quantity)+\" \")])]):_vm._l((_vm.availableStockProducts),function(depotProduct,index){return _c('div',{key:index,class:_vm.selectedDepotProduct ? \"product-item-active\": \"product-item\",on:{\"click\":function($event){_vm.selectedDepotProduct=depotProduct}}},[_c('p',[_vm._v(\"\\n          \"+_vm._s(depotProduct.product? depotProduct.product.product_name : \"\")+\"\\n          \"+_vm._s(depotProduct.variant? depotProduct.variant.variant_name : \"\")+\"\\n        \")]),_c('p',[_vm._v(\"Remaining: \"+_vm._s(depotProduct.remaining_quantity)+\" \")])])}),(_vm.availableStockProducts.length===0)?_c('div',{staticClass:\"my-6\"},[_c('span',{staticStyle:{\"color\":\"#e60000\"}},[_vm._v(\"No stock available in requested depot \")])]):_vm._e()],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n\n  <div>\n    <!--Categories Filter -->\n    <div class=\"flex flex-wrap items-center mb-6\">\n      <div class=\"flex-grow\">\n        <div class=\"flex flex-wrap \">\n          <h2 class=\"font-bold\"\n              style=\"line-height: 48px !important; display:flex;  vertical-align: middle !important;   \">\n            <vs-icon class=\"inline pt-2 mr-4\" size=\"32px\" icon=\"subject\"></vs-icon>\n            Request Details\n          </h2>\n         </div>\n      </div>\n      <vs-button v-if=\"!(stockRequest.approved)\" color=\"secondary\" @click=\"approveRequest()\">Approve</vs-button>\n      <vs-chip v-else color=\"success\">Approved</vs-chip>\n\n    </div>\n    <!-- [end] Categories Filter -->\n\n    <!-- List -->\n    <vx-card>\n\n      <!-- Products -->\n      <div style=\"\" class=\"px-6 py-6 rounded\">\n\n        <div class=\"flex flex-wrap \">\n          <h4 style=\"line-height: 48px !important; display:flex;  vertical-align: middle !important;   \">\n            <vs-icon class=\"inline pt-2 mr-4\" size=\"32px\" icon=\"person\"></vs-icon>\n            {{ selectedRequest.staff? selectedRequest.staff.staff_name : \"Unknown Staff\"  }}\n          </h4>\n        </div>\n         <vs-table v-model=\"selectedStockRequestProduct\" @selected=\"showDispatchForm()\" stripe   :data=\"stockRequest.request_products\">\n\n          <template slot=\"thead\">\n            <vs-th>Product </vs-th>\n            <vs-th>Variant </vs-th>\n            <vs-th>Requested  </vs-th>\n            <vs-th>Dispatched </vs-th>\n            <vs-th>Remaining </vs-th>\n             </template>\n\n          <template slot-scope=\"{data}\">\n            <vs-tr :data=\"item\" :key=\"rowIndex\" v-for=\"(item, rowIndex) in data\">\n\n              <vs-td>\n                {{ item.product ? item.product.product_name : \"No Product Name\"  }}\n              </vs-td>\n\n              <vs-td>\n                {{ item.variant ? item.variant.variant_name : \"No Name\"  }}\n              </vs-td>\n\n              <vs-td>\n                {{ item.quantity }}\n              </vs-td>\n\n\n              <vs-td>\n                 <vs-chip :color=\"item.approved? `#cdf7ec`:`#cdf7ec`\">\n                   <span v-bind:class=\"item.approved>0? `success-text`:`success-text`\"  style=\" font-weight: bold; margin-left: 4px;\">\n                    {{ item.dispatched_quantity  }}\n                   </span>\n                </vs-chip>\n              </vs-td>\n\n              <vs-td>\n                 <vs-chip :color=\"(item.quantity - item.dispatched_quantity)<=0? `#cdf7ec`:`#fff4f6`\">\n                   <span v-bind:class=\"(item.quantity - item.dispatched_quantity)<=0? `success-text`:`danger-text`\"  style=\" font-weight: bold; margin-left: 4px;\">\n                    {{ (item.quantity - item.dispatched_quantity)  }}\n                   </span>\n                </vs-chip>\n              </vs-td>\n\n\n            </vs-tr>\n          </template>\n        </vs-table>\n      </div>\n      <!-- [end] stockRequests -->\n\n\n      <!-- Dispatch Form -->\n      <vs-prompt :title=\"`Dispatch`\" :accept-text=\"`Dispatch`\" :cancel-text=\"`Cancel`\"\n                  :color=\"`#118ab2`\"\n                 @cancel=\"selectedDepotProduct= null\"\n                 @accept=\"dispatchProduct()\"\n                 :active.sync=\"dispatchFormDialog\">\n\n        <!-- headings -->\n        <h4 class=\"my-6\" v-if=\"selectedDepotProduct\">Quantity to dispatch</h4>\n        <h4 class=\"my-6\" v-else >Select depot stock</h4>\n\n\n        <!-- input -->\n        <div class=\"mb-6\" v-if=\"selectedDepotProduct\">\n           <vs-input placeholder=\"Quantity\" vs-placeholder=\"Quantity\" v-model=\"dispatchQuantity\" class=\"mt-3 w-full\"/>\n        </div>\n\n        <!-- stocks -->\n        <div v-if=\"selectedDepotProduct\" class=\"product-item-active\">\n          <p>\n            {{ selectedDepotProduct.product? selectedDepotProduct.product.product_name : \"\" }}\n            {{ selectedDepotProduct.variant? selectedDepotProduct.variant.variant_name : \"\" }}\n          </p>\n          <p>Remaining: {{ selectedDepotProduct.remaining_quantity}} </p>\n        </div>\n\n        <div v-else @click=\"selectedDepotProduct=depotProduct\"\n             v-bind:class=\"selectedDepotProduct ? `product-item-active`: `product-item`\"\n                v-for=\"(depotProduct, index) in availableStockProducts\" :key=\"index\">\n          <p>\n            {{ depotProduct.product? depotProduct.product.product_name : \"\" }}\n            {{ depotProduct.variant? depotProduct.variant.variant_name : \"\" }}\n          </p>\n          <p>Remaining: {{ depotProduct.remaining_quantity}} </p>\n        </div>\n\n        <div class=\"my-6\" v-if=\"availableStockProducts.length===0\">\n          <span style=\"color: #e60000\">No stock available in requested depot </span>\n        </div>\n\n\n      </vs-prompt>\n      <!-- [end] Dispatch Form -->\n\n\n    </vx-card>\n    <!-- List -->\n\n  </div>\n</template>\n\n<script>\nimport axios from \"@/axios\";\nimport vSelect from 'vue-select';\nimport {handle} from \"@/http/handler\";\n\nexport default {\n  props : {\n    selectedRequest : Object\n  },\n  components: {\n    vSelect\n  },\n  data() {\n    return {\n\n      stockRequests: [],\n      productInstance: { id: null, product_name: null, vendor_id: 1, is_published: false, categories_ids: [] },\n      productFormDialog: false,\n\n      placesVisible: false,\n      placesFormVisible: false,\n      placeInstance: {id: null, place_name: null, district_id: null},\n      places: [],\n\n      productCategoriesArray: [{\n        title: \"Main Category\",\n        id: null,\n        selected_category: null,\n        selected_category_id: null,\n        sub_categories: []\n      }],\n      availableVendors: [],\n      selectedVendor: null,\n      assignedCategories: [],\n\n\n      /** Product variants **/\n      productVariantsVisible: false,\n\n      availableCategories: [],\n      selectedCategory: {category_name: 'All Categories'},\n\n      availableDepots: [],\n      selectedDepot: { depot_name: \"All Depots\" },\n      availableStockProducts: [],\n      selectedStockRequestProduct: null,\n      selectedDepotProduct: null,\n\n      stockRequest: { request_products:[]},\n\n      /*** Dispatch **/\n      dispatchFormDialog: false,\n      dispatchQuantity: null,\n\n\n    }\n  },\n\n  methods: {\n\n    /*** stockRequests **/\n    fetchStockRequestDetails() {\n      console.log(\"fetching details: \"+this.selectedRequest.id )\n      this.stockRequests = [];\n      let endpoint = '/products/inventory/stock/request?id='+this.selectedRequest.id;\n      axios.get(endpoint)\n        .then((response) => {\n          this.stockRequest = response.data.payload.request;\n        }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    approveRequest(){\n      axios.post('/products/inventory/stock/request/approve',{\n        id: this.selectedRequest.id\n      }).then((response) => {\n           this.fetchStockRequestDetails();\n        }).catch((error) => {\n        console.log(error);\n        this.handleApiError(error);\n      })\n    },\n\n    showDispatchForm(){\n      if(this.selectedStockRequestProduct.quantity<=this.selectedStockRequestProduct.dispatched_quantity){\n        this.happilyNotify(\"Request fulfilled\");\n        return ;\n      }\n\n      if(!(this.stockRequest.approved===1)){\n        this.sadlyNotify(\"Request Not Approved\");\n        return ;\n      }\n\n      this.dispatchFormDialog = true;\n      this.getAvailableProducts();\n    },\n\n    getAvailableProducts(){\n      axios.post('/products/inventory/stock/request/available',{\n        requested_product_id  : this.selectedStockRequestProduct.id,\n        depot_id : this.selectedRequest.depot_id ,\n      })\n        .then((response) => {\n          this.availableStockProducts = response.data.payload;\n         }).catch((error) => {\n        console.log(error);\n        this.handleApiError(error);\n      })\n    },\n\n\n    dispatchProduct(){\n      axios.post('/products/inventory/stock/request/dispatch',{\n        requested_product_id  : this.selectedStockRequestProduct.id,\n        depot_product_id  : this.selectedDepotProduct.id,\n        quantity : this.dispatchQuantity ,\n      })\n        .then((response) => {\n          this.selectedDepotProduct = null;\n          this.selectedStockRequestProduct = null;\n          this.happilyNotify(\"Product Dispatched\");\n          this.fetchStockRequestDetails();\n        }).catch((error) => {\n        console.log(error);\n        this.handleApiError(error);\n      })\n    },\n\n\n    /*** Resources **/\n    fetchAvailableCategories() {\n      axios.get('/resources/products/categories/all')\n        .then((response) => {\n          this.availableCategories = response.data.payload.categories;\n          this.availableCategories.push(this.selectedCategory);\n\n        }).catch((error) => {\n        console.log(error);\n      });\n    },\n\n    fetchAvailableVendors() {\n      axios.get('/resources/products/vendors/all')\n        .then((response) => {\n          this.availableVendors = response.data.payload.vendors;\n        }).catch((error) => {\n        console.log(error);\n      });\n    },\n\n    fetchAvailableDepots() {\n      console.info(\"fetching depots..\");\n      console.info(JSON.stringify(this.selectedDepot));\n\n      axios.get('/resources/assets/depots')\n        .then((response) => {\n          this.availableDepots = response.data.payload.depots.data;\n          this.availableDepots.push(this.selectedDepot);\n          this.selectedDepot = this.availableDepots[0];\n         }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    /** Helpers **/\n    handleApiError(error) {\n      this.$vs.notify({\n        title: 'Error',\n        text: handle(error),\n        iconPack: 'feather',\n        icon: 'icon-alert-circle',\n        color: 'danger'\n      })\n    },\n\n    happilyNotify(message) {\n      this.$vs.notify({title: 'Success', text: message, color: 'success'})\n    },\n\n    sadlyNotify(message) {\n      this.$vs.notify({title: 'Error', text: message, color: 'danger', time:15000, position: 'bottom-left'})\n    },\n\n  },\n\n  created() {\n    if(this.selectedRequest==null){\n      console.log(\"SelectedRequest==null Going back\");\n      this.$router.go(-1);\n    }else{\n      console.log(this.selectedRequest.id);\n\n    }\n  },\n\n  mounted() {\n    this.fetchStockRequestDetails();\n  }\n}\n</script>\n\n<style scoped>\n.category-item {\n  padding: 8px 8px;\n  margin-top: 12px;\n  border: 1px solid #ddb892;\n  background-color: #fcf8f4;\n  border-radius: 4px;\n}\n\n.danger-text{\n  color: #d90429;\n}\n\n.success-text{\n  color: #048060;\n}\n.neutral-text{\n  color: #80656a;\n}\n\n.product-item{\n  background-color: #f8fcff;\n  padding: 12px;\n  border: 1px solid #bde0fe;\n  margin-bottom: 32px;\n}\n.product-item-active{\n  background-color: #eaf7f0;\n  padding: 12px;\n  border: 1px solid #95d5b2;\n  margin-bottom: 32px;\n}\n\ndiv.product-item-active:hover, div.product-item:hover {\n  cursor: pointer;\n}\n\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequestDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequestDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RequestDetails.vue?vue&type=template&id=9de7d256&scoped=true&\"\nimport script from \"./RequestDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./RequestDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RequestDetails.vue?vue&type=style&index=0&id=9de7d256&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9de7d256\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}