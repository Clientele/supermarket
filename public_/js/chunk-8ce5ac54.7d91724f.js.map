{"version":3,"sources":["webpack:///./src/http/handler.js","webpack:///./src/views/config/addresses/SalesZones.vue?921f","webpack:///src/views/config/addresses/SalesZones.vue","webpack:///./src/views/config/addresses/SalesZones.vue?902a","webpack:///./src/views/config/addresses/SalesZones.vue"],"names":["parseError","statusCode","handle","error","response","console","log","JSON","stringify","data","message","status","router","push","catch","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","showZoneForm","staticStyle","zones","scopedSlots","_u","key","fn","ref","_l","tr","rowIndex","zone_name","_s","created_at","id","showZoneDistricts","confirmZoneRemoval","slot","zoneFormDialog","zoneInstance","saveSalesZone","model","value","callback","$$v","$set","expression","districtsVisible","closeDistricts","showDistrictForm","districts","zone","district_name","confirmDistrictRemoval","districtsFormVisible","updateZone","closeRegionsForm","district","index","selectedDistricts","staticRenderFns","districtInstance","allDistricts","countries","methods","fetchZones","axios","$vs","dialog","type","color","title","text","accept","removeZone","endpoint","map","zone_id","district_ids","removeDistrict","handleApiError","notify","iconPack","icon","happilyNotify","fetchDistricts","created","component"],"mappings":"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","file":"js/chunk-8ce5ac54.7d91724f.js","sourcesContent":["import router from '@/router'\n\nfunction parseError(statusCode) {\n  switch (statusCode) {\n    case 400:\n    {\n      return \"Server could not understand the request\";\n    }break;\n\n    case 401:\n    {\n      return \"You have not logged in\";\n    }break;\n\n    case 402:\n    {\n      return \"Payment required\";\n    }break;\n\n    case 403:\n    {\n      return \"Resource is forbbidden\";\n    }\n      break;\n    case 404:\n    {\n      return \"URL/Resource Not found\";\n    }\n      break;\n    case 405:\n    {\n      return \"Request method not allowed\";\n    }\n      break;\n    case 406:\n    {\n      return \"Not Acceptable\";\n    }\n      break;\n    case 407:\n    {\n      return \"Proxy authentication required\";\n    }\n      break;\n\n    case 408:\n    {\n      return \"Request timeout\";\n    }\n      break;\n    case 413:\n    {\n      return \"Payload Too Large\";\n    }\n      break;\n\n    case 415:\n    {\n      return \"Unsupported Media Type\";\n    }\n      break;\n\n    case 413:\n    {\n      return \"Payload Too Large\";\n    }break;\n    case 422:\n    {\n      return \"Could not process request\";\n    }break;\n\n    case 429:\n    {\n      return \"Too Many Requests\";\n    }\n      break;\n\n/// 5xx\n    case 500:\n    {\n      return \"Internal Server Error\";\n    }\n      break;\n\n    case 504:\n    {\n      return \"Gateway Timeout\";\n    }\n      break;\n\n    case 504:\n    {\n      return \"Network Authentication Required\";\n    }\n      break;\n\n    default:\n      return \"Error Code:\"+statusCode\n  }\n}\n\nexport function handle(error) {\n\n   if(error.response){\n     console.log(JSON.stringify(error.response.data.message));\n\n     if(error.response.status==401){\n      console.log(\"redirecting....\");\n       router.push('/login').catch(() => {})\n      return \"Not logged in\";\n    }else{\n     let message = error.response.data? error.response.data.message:   error.response.message;\n     return message+\" -\"+parseError(error.response.status ) ;\n    }\n\n   }else{\n    console.log(error);\n  }\n\n  return \"An error occurred\"\n\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"flex flex-wrap-reverse items-center data-list-btn-container mb-6\"},[_c('vs-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"home_work\",\"size\":\"large\",\"color\":\"primary\"}}),_c('h1',{staticClass:\"mr-6\"},[_vm._v(\"\\n      Sales Zones\\n    \")]),_c('vs-button',{staticClass:\"mr-4 vs-con-loading__container\",attrs:{\"icon\":\"add\",\"id\":\"depotLoading\"},on:{\"click\":function($event){return _vm.showZoneForm()}}},[_vm._v(\"Add Zone\")])],1),_c('vx-card',[_c('div',{staticClass:\"px-6 py-6 rounded\",staticStyle:{\"border\":\"1px solid #e5e5e5\"}},[_c('vs-table',{attrs:{\"stripe\":\"\",\"data\":_vm.zones},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _vm._l((data),function(tr,rowIndex){return _c('vs-tr',{key:rowIndex},[_c('vs-td',{attrs:{\"data\":data[rowIndex].zone_name}},[_vm._v(\"\\n              \"+_vm._s(data[rowIndex].zone_name)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":data[rowIndex].created_at}},[_vm._v(\"\\n              \"+_vm._s(data[rowIndex].created_at)+\"\\n            \")]),_c('vs-td',{attrs:{\"data\":data[rowIndex].id}},[_c('vs-button',{staticClass:\"mr-4\",attrs:{\"type\":\"border\",\"color\":\"secondary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.showZoneDistricts(data[rowIndex])}}},[_vm._v(\"Open\")]),_c('vs-button',{staticClass:\"mr-4\",attrs:{\"type\":\"border\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.showZoneForm(data[rowIndex])}}},[_vm._v(\"Edit\")]),_c('vs-button',{staticClass:\"mr-4\",attrs:{\"type\":\"border\",\"color\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.confirmZoneRemoval(data[rowIndex])}}},[_vm._v(\"Remove\")])],1)],1)})}}])},[_c('template',{slot:\"thead\"},[_c('vs-th',[_vm._v(\"Region Name\")]),_c('vs-th',[_vm._v(\"Added\")]),_c('vs-th',[_vm._v(\"Action\")])],1)],2)],1),_c('vs-prompt',{attrs:{\"title\":\"Zone Name\",\"accept-text\":\"Save\",\"cancel-text\":\"Cancel\",\"color\":\"secondary\",\"active\":_vm.zoneFormDialog},on:{\"cancel\":function($event){_vm.zoneInstance={}},\"accept\":function($event){return _vm.saveSalesZone()},\"update:active\":function($event){_vm.zoneFormDialog=$event}}},[_c('div',[_c('vs-input',{staticClass:\"mt-3 w-full\",attrs:{\"placeholder\":\"Region Name\"},model:{value:(_vm.zoneInstance.zone_name),callback:function ($$v) {_vm.$set(_vm.zoneInstance, \"zone_name\", $$v)},expression:\"zoneInstance.zone_name\"}})],1)]),_c('vs-popup',{attrs:{\"fullscreen\":\"\",\"title\":\"Districts\",\"active\":_vm.districtsVisible},on:{\"close\":function($event){return _vm.closeDistricts()},\"update:active\":function($event){_vm.districtsVisible=$event}}},[_c('div',{staticClass:\"px-6 py-6 rounded\",staticStyle:{\"border\":\"1px solid #e5e5e5\"}},[_c('div',{staticClass:\"flex flex-wrap mb-4\"},[_c('h4',{staticClass:\"mb-4 mr-6 mt-2\"},[_vm._v(\" \"+_vm._s(_vm.zoneInstance.zone_name)+\" Districts\")]),_c('div',{staticClass:\"flex-grow\"},[_c('vs-button',{attrs:{\"icon\":\"add\"},on:{\"click\":function($event){return _vm.showDistrictForm()}}},[_vm._v(\"Add District\")])],1)]),_c('vs-table',{attrs:{\"stripe\":\"\",\"data\":_vm.districts},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _vm._l((data),function(zone,rowIndex){return _c('vs-tr',{key:rowIndex},[_c('vs-td',{attrs:{\"data\":data[rowIndex].district_name}},[_vm._v(\"\\n                \"+_vm._s(data[rowIndex].district_name)+\"\\n              \")]),_c('vs-td',{attrs:{\"data\":data[rowIndex].created_at}},[_vm._v(\"\\n                \"+_vm._s(data[rowIndex].created_at)+\"\\n              \")]),_c('vs-td',{attrs:{\"data\":data[rowIndex].id}},[_c('vs-button',{staticClass:\"mr-4\",attrs:{\"type\":\"border\",\"color\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.confirmDistrictRemoval(data[rowIndex])}}},[_vm._v(\"Remove\")])],1)],1)})}}])},[_c('template',{slot:\"thead\"},[_c('vs-th',[_vm._v(\"District Name\")]),_c('vs-th',[_vm._v(\"Added\")]),_c('vs-th',[_vm._v(\"Action\")])],1)],2)],1)]),_c('vs-popup',{attrs:{\"title\":\"Select Districts\",\"color\":\"secondary\",\"fullscreen\":\"\",\"active\":_vm.districtsFormVisible},on:{\"accept\":function($event){return _vm.updateZone()},\"close\":function($event){return _vm.closeRegionsForm()},\"update:active\":function($event){_vm.districtsFormVisible=$event}}},[_c('div',[_c('div',{staticClass:\"vx-row\"},_vm._l((_vm.allDistricts),function(district,index){return _c('div',{key:index,staticClass:\"vx-col md:w-1/4 w-1/6 px-6 py-6\"},[_c('vs-checkbox',{attrs:{\"vs-value\":district.id},model:{value:(_vm.selectedDistricts),callback:function ($$v) {_vm.selectedDistricts=$$v},expression:\"selectedDistricts\"}},[_vm._v(_vm._s(district.district_name))])],1)}),0),_c('div',{staticClass:\"vx-row px-6\"},[_c('vs-button',{attrs:{\"color\":\"secondary\"},on:{\"click\":_vm.updateZone}},[_vm._v(\"Update Zone\")])],1)])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n<template>\n <div>\n   <div class=\"flex flex-wrap-reverse items-center data-list-btn-container mb-6\">\n\n     <vs-icon class=\"mr-2\" icon=\"home_work\" size=\"large\" color=\"primary\"></vs-icon>\n     <h1 class=\"mr-6\">\n       Sales Zones\n     </h1>\n\n     <!-- Add Sales Zone -->\n     <vs-button icon=\"add\" id=\"depotLoading\"  @click=\"showZoneForm()\"\n                class=\"mr-4 vs-con-loading__container\">Add Zone</vs-button>\n   </div>\n\n   <vx-card >\n\n\n     <!-- Regions -->\n     <div style=\"border: 1px solid #e5e5e5\" class=\"px-6 py-6 rounded\">\n        <vs-table stripe :data=\"zones\">\n\n         <template slot=\"thead\">\n           <vs-th>Region Name</vs-th>\n           <vs-th>Added</vs-th>\n           <vs-th>Action</vs-th>\n         </template>\n\n         <template slot-scope=\"{data}\">\n           <vs-tr :key=\"rowIndex\" v-for=\"(tr, rowIndex) in data\">\n             <vs-td :data=\"data[rowIndex].zone_name\">\n               {{data[rowIndex].zone_name}}\n             </vs-td>\n             <vs-td :data=\"data[rowIndex].created_at\">\n               {{data[rowIndex].created_at}}\n             </vs-td>\n             <vs-td :data=\"data[rowIndex].id\">\n               <vs-button type=\"border\" color=\"secondary\" class=\"mr-4\" size=\"small\" @click=\"showZoneDistricts(data[rowIndex])\">Open</vs-button>\n               <vs-button type=\"border\"  class=\"mr-4\" size=\"small\" @click=\"showZoneForm(data[rowIndex])\">Edit</vs-button>\n               <vs-button  type=\"border\" color=\"danger\" class=\"mr-4\" size=\"small\" @click=\"confirmZoneRemoval(data[rowIndex])\">Remove</vs-button>\n             </vs-td>\n           </vs-tr>\n         </template>\n       </vs-table>\n     </div>\n\n     <!-- Region Form -->\n     <vs-prompt :title=\"`Zone Name`\" :accept-text=\"`Save`\" :cancel-text=\"`Cancel`\"\n                @cancel=\"zoneInstance={}\" color=\"secondary\"\n                @accept=\"saveSalesZone()\"\n                :active.sync=\"zoneFormDialog\">\n       <div  >\n         <vs-input placeholder=\"Region Name\"  v-model=\"zoneInstance.zone_name\" class=\"mt-3 w-full\"/>\n       </div>\n     </vs-prompt>\n     <!-- [end] Region Form -->\n     <!--[end]  Regions -->\n\n\n\n     <!-- Districts -->\n     <vs-popup @close=\"closeDistricts()\" fullscreen title=\"Districts\" :active.sync=\"districtsVisible\">\n       <div style=\"border: 1px solid #e5e5e5\" class=\"px-6 py-6 rounded\">\n\n         <div class=\"flex flex-wrap mb-4\">\n           <h4 class=\"mb-4 mr-6 mt-2\"> {{ zoneInstance.zone_name }} Districts</h4>\n           <div class=\"flex-grow\">\n             <vs-button icon=\"add\"  @click=\"showDistrictForm()\">Add District</vs-button>\n           </div>\n         </div>\n\n         <vs-table stripe :data=\"districts\">\n\n           <template slot=\"thead\">\n             <vs-th>District Name</vs-th>\n             <vs-th>Added</vs-th>\n             <vs-th>Action</vs-th>\n           </template>\n\n           <template slot-scope=\"{data}\">\n             <vs-tr :key=\"rowIndex\" v-for=\"(zone, rowIndex) in data\">\n               <vs-td :data=\"data[rowIndex].district_name\">\n                 {{data[rowIndex].district_name}}\n               </vs-td>\n               <vs-td :data=\"data[rowIndex].created_at\">\n                 {{data[rowIndex].created_at}}\n               </vs-td>\n               <vs-td :data=\"data[rowIndex].id\">\n                 <vs-button  type=\"border\" color=\"danger\" class=\"mr-4\" size=\"small\" @click=\"confirmDistrictRemoval(data[rowIndex])\">Remove</vs-button>\n               </vs-td>\n             </vs-tr>\n           </template>\n         </vs-table>\n       </div>\n     </vs-popup>\n\n     <!-- District Form -->\n     <vs-popup  title=\"Select Districts\"\n                 color=\"secondary\" @accept=\"updateZone()\" @close=\"closeRegionsForm()\"\n                fullscreen  :active.sync=\"districtsFormVisible\">\n       <div>\n\n         <div class=\"vx-row\">\n\n           <div v-for=\"(district, index) in allDistricts\"\n                class=\"vx-col md:w-1/4 w-1/6 px-6 py-6\" :key=\"index\">\n             <vs-checkbox v-model=\"selectedDistricts\" :vs-value=\"district.id\">{{ district.district_name }}</vs-checkbox>\n           </div>\n\n\n         </div>\n\n         <div class=\"vx-row px-6\">\n           <vs-button color=\"secondary\" @click=\"updateZone\">Update Zone</vs-button>\n         </div>\n\n\n         </div>\n     </vs-popup>\n     <!-- [end] District Form -->\n\n   </vx-card>\n </div>\n</template>\n\n<script>\nimport axios from \"@/axios\";\nimport {handle} from \"@/http/handler\";\n\nexport default {\n  data () {\n    return {\n      zones: [],\n      zoneInstance: { id: null,  zone_name : null, country_id : 1 },\n      zoneFormDialog: false,\n\n      districtsVisible: false,\n      districtsFormVisible: false,\n      districtInstance : {id: null,  district_name : null, zone_id : null},\n      districts : [],\n      selectedDistricts: [],\n\n\n      allDistricts: [],\n      countries: [\n        { \"name\": \"Tanzania\" },\n        { \"name\": \"Kenya\" },\n        { \"name\": \"Uganda\" },\n        { \"name\": \"Rwanda\" },\n        { \"name\": \"Burundi\" },\n        { \"name\": \"Congo\" }\n      ]\n\n    }\n  },\n  methods: {\n\n    /*** Regions **/\n    fetchZones() {\n      axios.get('/resources/addresses/zones').then((response) => {\n        this.zones = response.data.payload.zones;\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    showZoneForm(zone){\n     // this.$store.commit('general/TOGGLE_GENERAL_NOTIFICATION', true)\n      this.zoneInstance = zone? zone : {};\n      this.zoneFormDialog = true;\n    },\n\n    saveSalesZone(){\n      axios.post('/config/addresses/zone/add', this.zoneInstance)\n        .then((response) => {\n          this.zoneFormDialog = false;\n          this.fetchZones();\n          this.happilyNotify(\"Zone Added\")\n        }).catch((error) => {\n        console.log(error);\n        this.handleApiError(error);\n        })\n    },\n\n    confirmZoneRemoval(zone){\n      this.zoneInstance = zone;\n      this.$vs.dialog({\n        type: 'confirm',\n        color: 'danger',\n        title: `Confirm`,\n        text: 'Are you sure you want to remove '+this.zoneInstance.zone_name,\n        accept: this.removeZone\n      })\n    },\n\n    removeZone(){\n      axios.post('/config/addresses/zone/remove', {\n        id: this.zoneInstance.id\n      })\n        .then((response) => {\n          this.fetchZones();\n        }).catch((error) => {\n        console.log(error)\n        })\n    },\n\n\n    /*** District **/\n    showZoneDistricts(zone){\n      if(zone){\n        this.zoneInstance = zone;\n      }\n      this.districtsVisible = true;\n      let endpoint ='/resources/addresses/zone/districts?zone_id='+this.zoneInstance.id;\n      console.log(endpoint)\n      axios.get(endpoint)\n        .then((response) => {\n        this.districts = response.data.payload.districts;\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    showDistrictForm(){\n      this.selectedDistricts = this.districts.map(function (district) { return district.id; });\n      this.districtsFormVisible = true;\n      this.districtsVisible = false;\n    },\n\n    updateZone(){\n      axios.post('/config/addresses/zone/update', {\n        zone_id: this.zoneInstance.id,\n        district_ids : this.selectedDistricts\n      })\n        .then((response) => {\n           this.districtsFormVisible = false;\n           this.showZoneDistricts();\n           this.happilyNotify(\"Updated\");\n          this.selectedDistricts = [];\n         }).catch((error) => {\n        console.log(error);\n        this.handleApiError(error)\n      })\n    },\n\n    confirmDistrictRemoval(district){\n      this.districtsVisible  = false;\n      this.districtInstance = district;\n      this.$vs.dialog({\n        type: 'confirm',\n        color: 'danger',\n        title: `Confirm`,\n        text: 'Are you sure you want to remove '+this.districtInstance.district_name,\n        accept: this.removeDistrict\n      })\n    },\n\n    removeDistrict(){\n      axios.post('/config/addresses/zone/district/remove', {\n        id: this.districtInstance.id\n      })\n        .then((response) => {\n          this.showZoneDistricts();\n        }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    closeDistricts(){\n      this.districtsVisible = false;\n      this.zoneInstance = {};\n    },\n\n\n\n    /** Helpers **/\n    handleApiError(error){\n      this.$vs.notify({\n        title: 'Error',\n        text: handle(error),\n        iconPack: 'feather',\n        icon: 'icon-alert-circle',\n        color: 'danger'\n      })\n    },\n\n    happilyNotify(message){\n      this.$vs.notify({ title: 'Success',  text: message, color: 'success'})\n    },\n\n    fetchDistricts() {\n      axios.get('/resources/addresses/districts').then((response) => {\n        this.allDistricts = response.data.payload.districts;\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n\n  },\n  created() {\n    this.fetchZones();\n    this.fetchDistricts();\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SalesZones.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SalesZones.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SalesZones.vue?vue&type=template&id=32cc2a28&\"\nimport script from \"./SalesZones.vue?vue&type=script&lang=js&\"\nexport * from \"./SalesZones.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}