(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a78e406a"],{"6c77":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"flex flex-wrap items-center mb-6"},[a("div",{staticClass:"flex-grow"},[a("div",{staticClass:"flex flex-wrap "},[a("h2",{staticClass:"font-bold",staticStyle:{"line-height":"48px !important",display:"flex","vertical-align":"middle !important"}},[a("vs-icon",{staticClass:"inline pt-2 mr-4",attrs:{size:"32px",icon:"local_shipping"}}),t._v("\n          Mobile Stock\n        ")],1),a("v-select",{staticClass:"flex ml-4",attrs:{options:t.availableDepots,name:"depot_name",label:"depot_name",clearable:!1,placeholder:"Depot"},on:{input:function(e){return t.fetchStaffWithStock()}},model:{value:t.selectedDepot,callback:function(e){t.selectedDepot=e},expression:"selectedDepot"}}),a("vs-button",{staticClass:"py-0 ml-4",attrs:{icon:"refresh",type:"flat"},on:{click:function(e){return t.fetchStaffWithStock()}}},[t._v("Refresh")])],1)])]),a("vx-card",[a("div",{staticClass:"px-6 py-6 rounded"},[a("vs-table",{attrs:{stripe:"",data:t.staffWithStock},on:{selected:function(e){return t.showTruckedStock()}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,o){return a("vs-tr",{key:o,attrs:{data:e}},[a("vs-td",[t._v("\n              "+t._s(s[o].staff_name)+"\n            ")]),t._l(s[o].trucked_products,(function(e,s){return a("vs-td",{key:s},[s>=3?a("span",[3===s?a("span",[t._v(" More products ")]):t._e()]):a("vs-chip",{attrs:{color:"#e7f1fc"}},[a("span",{staticStyle:{color:"#084789"}},[t._v(" "+t._s(e.product?e.product.product_name:"")+": ")]),a("span",{staticStyle:{color:"#084789","font-weight":"bold","margin-left":"4px"}},[t._v("\n                  "+t._s(e.remaining_quantity)+"\n                ")])])],1)}))],2)}))}}]),model:{value:t.selectedStaff,callback:function(e){t.selectedStaff=e},expression:"selectedStaff"}},[a("template",{slot:"thead"},[a("vs-th",[t._v("Sales Person ")]),a("vs-th",[t._v(" Products ")]),a("vs-th"),a("vs-th"),a("vs-th"),a("vs-th"),a("vs-th")],1)],2)],1),a("vs-popup",{attrs:{fullscreen:"",title:"",active:t.productVariantsVisible},on:{close:function(e){return t.closeProductVariantsDialog()},"update:active":function(e){t.productVariantsVisible=e}}},[a("div")])],1)],1)},o=[],c=a("bb36"),i=a("4a7a"),n=a.n(i),l={components:{vSelect:n.a},data:function(){return{staffWithStock:[],productInstance:{id:null,product_name:null,vendor_id:1,is_published:!1,categories_ids:[]},productFormDialog:!1,placesVisible:!1,placesFormVisible:!1,placeInstance:{id:null,place_name:null,district_id:null},places:[],productCategoriesArray:[{title:"Main Category",id:null,selected_category:null,selected_category_id:null,sub_categories:[]}],availableVendors:[],selectedVendor:null,assignedCategories:[],productVariantsVisible:!1,availalbleCategories:[],selectedCategory:{category_name:"All Categories"},availableDepots:[],selectedDepot:{depot_name:"All Depots"},selectedStaff:{}}},methods:{fetchStaffWithStock:function(){var t=this;this.staffWithStock=[];var e="/products/inventory/stock/mobile?depot_id="+this.selectedDepot.id;console.log(JSON.stringify(this.selectedDepot)),console.log(e),c["a"].get(e).then((function(e){t.staffWithStock=e.data.payload.staff.data})).catch((function(t){console.log(t)}))},showTruckedStock:function(){this.$router.push({name:"products-inventory-stock-mobile-details",params:{staff:this.selectedStaff}})},closeProductForm:function(){this.productFormDialog=!1},closeProductVariantsDialog:function(){this.productVariantsVisible=!1,this.fetchStaffWithStock()},showProductVariants:function(t){this.productInstance=t,this.productVariantsVisible=!0},fetchSubCategories:function(t){var e=this;c["a"].get("/resources/products/categories?parent_id="+t.selected_category.id).then((function(a){var s=a.data.payload.categories;if(s.length>0){console.log("Has sub categories");var o={};o.id=t.id,o.title=t.selected_category.category_name,o.selected_category_id=t.null,o.sub_categories=s,e.productCategoriesArray.push(o)}})).catch((function(t){console.log(t)}))},fetchAvailableDepots:function(){var t=this;console.info("fetching depots.."),c["a"].get("/resources/assets/depots").then((function(e){t.availableDepots=e.data.payload.depots.data,t.availableDepots.push(t.selectedDepot),t.selectedDepot=t.availableDepots[0],t.fetchStaffWithStock()})).catch((function(t){console.log(t)}))}},created:function(){this.fetchAvailableDepots()},mounted:function(){}},r=l,d=(a("a81f"),a("2877")),u=Object(d["a"])(r,s,o,!1,null,"21b5a274",null);e["default"]=u.exports},a81f:function(t,e,a){"use strict";a("e3f3")},e3f3:function(t,e,a){}}]);
//# sourceMappingURL=chunk-a78e406a.33162c94.js.map