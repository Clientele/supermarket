(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f3f785c"],{2141:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"page-user-view"}},[r("div",{attrs:{id:"user-data"}},[r("vx-card",{staticClass:"mb-base",attrs:{title:"Customer"}},[r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col",attrs:{id:"avatar-col"}},[r("div",{staticClass:"img-container mb-4"},[r("img",{staticClass:"rounded w-full",attrs:{src:s("698a")}})])]),r("div",{staticClass:"vx-col flex-1",attrs:{id:"account-info-col-1"}},[r("table",[r("tr",[r("td",{staticClass:"font-semibold"},[t._v("Name")]),r("td",[t._v(" "+t._s(t.customer.customer_name))])]),r("tr",[r("td",{staticClass:"font-semibold"},[t._v("Phone ")]),r("td",[t._v(t._s(t.customer.phone_number_1)+", "+t._s(t.customer.phone_number_2)+" ")])]),r("tr",[r("td",{staticClass:"font-semibold"},[t._v("Email")]),r("td",[t._v(t._s(t.customer.email))])])])]),r("div",{staticClass:"vx-col flex-1",attrs:{id:"account-info-col-2"}},[r("table",[r("tr",[r("td",{staticClass:"font-semibold"},[t._v("Status")]),r("td",[t._v("Active")])]),r("tr",[r("td",{staticClass:"font-semibold"},[t._v("Last Seen")]),r("td",[t._v("January 7th 2020")])]),r("tr",[r("td",{staticClass:"font-semibold"},[t._v("Added by")]),r("td",[t._v(t._s(t.customer.creator?t.customer.creator.name:"Unknown"))])])])]),r("div",{staticClass:"vx-col w-full flex",attrs:{id:"account-manage-buttons"}},[t.customer.verified?r("vs-chip",{attrs:{size:"large",color:"success"}},[r("vs-avatar",{attrs:{color:"secondary","icon-pack":"feather",icon:"icon-check"}}),t._v("\n             Verified\n           ")],1):r("vs-button",{staticClass:"mr-4",attrs:{"icon-pack":"feather",color:"secondary",icon:"icon-check"},on:{click:function(e){return t.verifyCustomer()}}},[t._v("Verify")])],1)])]),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col   w-full"},[r("vx-card",{attrs:{title:"Orders"}},[r("vs-table",{ref:"table",attrs:{pagination:"","max-items":100,data:t.orders},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return[r("tbody",t._l(s,(function(e,s){return r("vs-tr",{key:s,attrs:{data:e}},[r("vs-td",[r("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.id))])]),r("vs-td",[r("p",{staticClass:"product-category"},[t._v("\n                    "+t._s(e.place?e.place.place_name:" ")+"\n                    "+t._s(e.district?e.district.district_name:" ")+"\n                    "+t._s(e.region?e.region.region_name:" ")+"\n                  ")])]),r("vs-td",[e.is_delivered?r("vs-chip",{attrs:{color:"success"}},[t._v("Delivered")]):e.is_cancelled?r("vs-chip",{attrs:{color:"danger"}},[t._v("Cancelled")]):r("vs-chip",{attrs:{color:"#8a5a44"}},[t._v("Pending")])],1),r("vs-td",[t._v(" "+t._s(e.created_at))]),r("vs-td",{staticClass:"whitespace-no-wrap"},[r("vs-button",{staticClass:"mr-2",attrs:{color:"secondary",size:"small",type:"border"}},[t._v("View")])],1),r("vs-td")],1)})),1)]}}])},[r("template",{slot:"thead"},[r("vs-th",{attrs:{"sort-key":"name"}},[t._v("#")]),r("vs-th",[t._v("Address")]),r("vs-th",[t._v("Status")]),r("vs-th",[t._v("Date")]),r("vs-th"),r("vs-th",[t._v("Sales Person")])],1)],2)],1)],1)]),r("div",{staticClass:"vx-row my-6"},[r("div",{staticClass:"vx-col lg:w-1/2 w-full"},[r("div",{staticClass:"flex"},[r("vs-button",{attrs:{type:"border",color:"danger","icon-pack":"feather",icon:"icon-trash"},on:{click:t.confirmDeleteRecord}},[t._v("Delete Customer")]),t.customer.verified?r("vs-button",{staticClass:"ml-6",attrs:{type:"border","icon-pack":"feather"},on:{click:function(e){return t.verifyCustomer(!1)}}},[t._v("Unverify Customer")]):t._e()],1)])])],1),r("vs-popup",{attrs:{fullscreen:"",title:"Customer Info",active:t.userFormVisible},on:{close:function(e){return t.closeCustomerForm()},"update:active":function(e){t.userFormVisible=e}}},[r("div")])],1)},o=[],a=(s("c5f6"),s("bb36")),c=s("2567"),n={components:{},props:{customerId:[String,Number]},data:function(){return{user_data:null,user_not_found:!1,customer:{id:"",user_id:"",customer_name:"",phone_number:"",email:"",created_at:""},userFormDialog:!1,orders:[]}},computed:{userFormVisible:function(){return this.$store.state.general.userFormVisible}},watch:{userFormVisible:function(t){this.fetchCustomerDetails()}},methods:{fetchCustomerDetails:function(){var t=this;a["a"].get("/resources/sales/customer/details?id="+this.customerId).then((function(e){t.customer=e.data.payload.customer})).catch((function(e){console.log(e),t.handleApiError(e)}))},deleteCustomer:function(){var t=this;a["a"].post("/config/customer/user/remove",{id:this.customerId}).then((function(e){t.$router.go(-1)})).catch((function(e){console.log(e),t.handleApiError(e)}))},verifyCustomer:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a["a"].post("/sales/customer/verify",{id:this.customerId,value:e}).then((function(e){t.happilyNotify("Verification status updated"),t.fetchCustomerDetails()})).catch((function(e){console.log(e),t.handleApiError(e)}))},confirmDeleteRecord:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Delete",text:'You are about to delete "'.concat(this.customer.customer_name,'"'),accept:this.deleteCustomer,acceptText:"Delete"})},showCustomerForm:function(){this.$store.commit("general/TOGGLE_USER_FORM",!0)},closeCustomerForm:function(){this.$store.commit("general/TOGGLE_USER_FORM",!1)},navigateToCustomers:function(){this.$router.push({name:"sales-customers"})},fetchCustomerOrders:function(){var t=this;a["a"].get("/resources/sales/customer/orders?customer_id="+this.customerId).then((function(e){t.orders=e.data.payload.orders.data})).catch((function(e){console.log(e),t.handleApiError(e)}))},handleApiError:function(t){this.$vs.notify({title:"Error",text:Object(c["a"])(t),iconPack:"feather",icon:"icon-alert-circle",color:"danger"})},happilyNotify:function(t){this.$vs.notify({title:"Success",text:t,color:"success"})},sadlyNotify:function(t){this.$vs.notify({title:"Error",text:t,color:"danger",position:"bottom-left"})}},created:function(){console.log("CustomerDetails: CustomerID:"+this.customerId),this.customerId?(this.fetchCustomerDetails(),this.fetchCustomerOrders()):this.navigateToCustomers()}},i=n,u=(s("2149"),s("2877")),l=Object(u["a"])(i,r,o,!1,null,null,null);e["default"]=l.exports},2149:function(t,e,s){"use strict";s("e4a9")},2567:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var r=s("41cb");function o(t){switch(t){case 400:return"Server could not understand the request";case 401:return"You have not logged in";case 402:return"Payment required";case 403:return"Resource is forbbidden";case 404:return"URL/Resource Not found";case 405:return"Request method not allowed";case 406:return"Not Acceptable";case 407:return"Proxy authentication required";case 408:return"Request timeout";case 413:return"Payload Too Large";case 415:return"Unsupported Media Type";case 413:return"Payload Too Large";case 422:return"Could not process request";case 429:return"Too Many Requests";case 500:return"Internal Server Error";case 504:return"Gateway Timeout";case 504:return"Network Authentication Required";default:return"Error Code:"+t}}function a(t){if(t.response){if(console.log(JSON.stringify(t.response.data.message)),401==t.response.status)return console.log("redirecting...."),r["a"].push("/login").catch((function(){})),"Not logged in";var e=t.response.data?t.response.data.message:t.response.message;return e+" -"+o(t.response.status)}return console.log(t),"An error occurred"}},"698a":function(t,e,s){t.exports=s.p+"img/user_.60c70b0f.png"},e4a9:function(t,e,s){}}]);
//# sourceMappingURL=chunk-5f3f785c.94db49cc.js.map