{"version":3,"sources":["webpack:///./src/views/products/inventory/mobile/TruckedStockDetails.vue?8f27","webpack:///src/views/products/inventory/mobile/TruckedStockDetails.vue","webpack:///./src/views/products/inventory/mobile/TruckedStockDetails.vue?3865","webpack:///./src/views/products/inventory/mobile/TruckedStockDetails.vue?348b","webpack:///./src/views/products/inventory/mobile/TruckedStockDetails.vue?7ee9"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","_v","_s","staff","staff_name","on","$event","fetchTruckedStock","truckedStock","scopedSlots","_u","key","fn","ref","data","_l","item","rowIndex","product","product_name","variant","variant_name","created_at","received_quantity","remaining_quantity","slot","staticRenderFns","components","vSelect","props","Object","user_data","productsVariants","rolesAvailable","selectedVariant","staffStatus","stockFormVisible","depotStockInstance","depot_id","product_variant_id","batch_number","expiry_date","variantBatchesVisible","watch","computed","validateForm","errors","any","methods","closeProductVariants","$emit","console","log","axios","error","showStockReceptionForm","closeStockForm","saveReceivedStock","depot","id","JSON","stringify","response","message","time","color","title","text","fetchTruckedStockBreakdown","showStockBatchBreakdown","closeStockBatchBreakdown","created","mounted","$router","go","component"],"mappings":"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","file":"js/chunk-fc5bc830.c82cc403.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"page-user-view\"}},[_c('vs-card',[_c('div',{staticClass:\"px-6 py-6\"},[_c('div',{staticClass:\"flex flex-wrap items-center mb-6\"},[_c('div',{staticClass:\"flex-grow\"},[_c('div',{staticClass:\"flex flex-wrap \"},[_c('h2',{staticClass:\"font-bold\",staticStyle:{\"line-height\":\"48px !important\",\"display\":\"flex\",\"vertical-align\":\"middle !important\"}},[_vm._v(\"\\n             \"+_vm._s(_vm.staff.staff_name)+\" Â  \"),_c('span',{staticStyle:{\"font-weight\":\"lighter\"}},[_vm._v(\" Stock \")])]),_c('vs-button',{staticClass:\"py-0 ml-4\",attrs:{\"icon\":\"refresh\",\"type\":\"flat\"},on:{\"click\":function($event){return _vm.fetchTruckedStock()}}},[_vm._v(\"Refresh\")])],1)])]),_c('vs-table',{attrs:{\"stripe\":\"\",\"data\":_vm.truckedStock},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _vm._l((data),function(item,rowIndex){return _c('vs-tr',{key:rowIndex},[_c('vs-td',[_vm._v(\"\\n             \"+_vm._s(data[rowIndex].product? data[rowIndex].product.product_name : \" \")+\"\\n             (\"+_vm._s(data[rowIndex].variant? data[rowIndex].variant.variant_name : \" \")+\")\\n           \")]),_c('vs-td',[_vm._v(\" \"+_vm._s(data[rowIndex].created_at))]),_c('vs-td',[_vm._v(\" \"+_vm._s(data[rowIndex].received_quantity))]),_c('vs-td',[_vm._v(\" \"+_vm._s(data[rowIndex].remaining_quantity))]),_c('vs-td',[_c('vs-progress',{attrs:{\"height\":12,\"percent\":(data[rowIndex].remaining_quantity/((data[rowIndex].received_quantity)))*100,\"color\":(item.remaining_quantity/item.received_quantity) > 0.3? \"success\":\"danger\"}})],1)],1)})}}])},[_c('template',{slot:\"thead\"},[_c('vs-th',[_vm._v(\"Product \")]),_c('vs-th',[_vm._v(\"Reception Date\")]),_c('vs-th',[_vm._v(\"Received QTY\")]),_c('vs-th',[_vm._v(\"Remaining QTY\")]),_c('vs-th',[_vm._v(\"Remaining\")]),_c('vs-th')],1)],2)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"page-user-view\">\n\n\n   <vs-card>\n     <!-- Batches breakdown -->\n     <div  class=\"px-6 py-6\" >\n       <!-- Heading -->\n       <div class=\"flex flex-wrap items-center mb-6\">\n         <div class=\"flex-grow\">\n           <div class=\"flex flex-wrap \">\n             <h2 class=\"font-bold\"\n                 style=\"line-height: 48px !important; display:flex;  vertical-align: middle !important;   \">\n               {{  staff.staff_name }} &nbsp; <span style=\"font-weight: lighter;\"> Stock </span>\n             </h2>\n\n             <vs-button icon=\"refresh\" class=\"py-0 ml-4\" type=\"flat\" @click=\"fetchTruckedStock()\">Refresh</vs-button>\n           </div>\n         </div>\n\n\n       </div>\n       <!-- [end] Heading -->\n\n       <!-- Variant List -->\n       <vs-table stripe :data=\"truckedStock\">\n\n         <template slot=\"thead\">\n           <vs-th>Product </vs-th>\n           <vs-th>Reception Date</vs-th>\n           <vs-th>Received QTY</vs-th>\n           <vs-th>Remaining QTY</vs-th>\n           <vs-th>Remaining</vs-th>\n           <vs-th></vs-th>\n         </template>\n\n         <template slot-scope=\"{data}\">\n           <vs-tr :key=\"rowIndex\" v-for=\"(item, rowIndex) in data\">\n\n             <vs-td  >\n               {{ data[rowIndex].product? data[rowIndex].product.product_name : \" \" }}\n               ({{ data[rowIndex].variant? data[rowIndex].variant.variant_name : \" \" }})\n             </vs-td>\n             <vs-td  > {{ data[rowIndex].created_at }}</vs-td>\n             <vs-td > {{ data[rowIndex].received_quantity }}</vs-td>\n             <vs-td > {{ data[rowIndex].remaining_quantity }}</vs-td>\n\n             <vs-td>\n               <vs-progress :height=\"12\" :percent=\"(data[rowIndex].remaining_quantity/((data[rowIndex].received_quantity)))*100\"\n                            :color=\"(item.remaining_quantity/item.received_quantity) > 0.3? `success`:`danger`\">\n               </vs-progress>\n             </vs-td>\n\n           </vs-tr>\n         </template>\n       </vs-table>\n       <!-- [End] Variant List -->\n     </div>\n     <!-- [end] Batches breakdown -->\n\n   </vs-card>\n\n  </div>\n</template>\n\n<script>\n\nimport axios from \"@/axios\";\nimport vSelect from 'vue-select'\nimport Datepicker from 'vuejs-datepicker';\n\nexport default {\n  components: {\n    vSelect,Datepicker\n  },\n  props: {\n    staff: Object\n  },\n  data() {\n    return {\n      user_data: null,\n      productsVariants: [],\n      rolesAvailable: [],\n      selectedVariant: {},\n      staffStatus: ['Active', 'Suspended'],\n\n      stockFormVisible: false,\n      depotStockInstance: {\n        depot_id: null,\n        product_variant_id: null,\n        received_quantity: null,\n        batch_number: null,\n        expiry_date: null\n      },\n\n      variantBatchesVisible: false,\n      truckedStock: []\n\n    }\n  },\n  watch: {\n    staff: function (newVal) {\n      this.fetchTruckedStock();\n    }\n  },\n\n  computed: {\n    validateForm() {\n      return !this.errors.any()\n    }\n  },\n\n  methods: {\n    closeProductVariants() {\n      this.$emit('closeProductVariants');\n    },\n\n    fetchTruckedStock() {\n      console.log(\"Fetching trucked stock..\");\n      let endpoint = '/products/inventory/stock/mobile/staff?staff_id=' + this.staff.id;\n      axios.get(endpoint)\n        .then((response) => {\n          this.truckedStock = response.data.payload.trucked_stock.data ;\n        }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    showStockReceptionForm(variant = {}) {\n      this.selectedVariant = variant\n      this.stockFormVisible = true;\n    },\n\n    closeStockForm() {\n      this.stockFormVisible = false;\n    },\n\n    saveReceivedStock() {\n\n      this.depotStockInstance.depot_id = this.depot.id;\n      this.depotStockInstance.product_variant_id = this.selectedVariant.id;\n      console.log(JSON.stringify(this.depotStockInstance));\n      let endpoint = '/products/inventory/stock/receive';\n\n      axios.post(endpoint, this.depotStockInstance)\n        .then((response) => {\n          this.stockFormVisible = false;\n          this.depotStockInstance = {};\n          this.fetchTruckedStock();\n        }).catch((error) => {\n        let message = \"Something went wrong\";\n        if (error.response) {\n          message = error.response.data.message;\n        }\n\n        this.$vs.loading.close();\n        this.$vs.notify({\n          time: 12000,\n          color: 'danger',\n          title: 'Failed',\n          text: message\n        })\n        console.log(error)\n      })\n    },\n\n    /** Breakdown **/\n    fetchTruckedStockBreakdown() {\n      console.log(\"Fetching variants stock breakdown..\");\n      let endpoint = 'products/inventory/stock/variant/breakdown?variant_id=' + this.selectedVariant.id ;\n      axios.get(endpoint)\n        .then((response) => {\n          this.truckedStock = response.data.success ? response.data.payload.depot_products : [];\n        }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    showStockBatchBreakdown(variant = {}) {\n      this.selectedVariant = variant\n      this.variantBatchesVisible = true;\n      this.fetchTruckedStockBreakdown();\n    },\n\n    closeStockBatchBreakdown() {\n      this.variantBatchesVisible = false;\n    },\n\n    /** Resources **/\n\n  },\n\n  created() {\n   },\n  mounted() {\n    if(this.staff!=null){\n      this.fetchTruckedStock();\n    }else{\n      console.log(\"No staff passed, returning\");\n      this.$router.go(-1);\n    }\n\n  }\n}\n\n</script>\n\n<style scoped>\n.variant-form {\n  border-radius: 6px;\n  padding: 32px 16px;\n  border: 1px solid #b2c2b2;\n  background-color: #fffaf5;\n}\n</style>\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TruckedStockDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TruckedStockDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TruckedStockDetails.vue?vue&type=template&id=fbdcc4d8&scoped=true&\"\nimport script from \"./TruckedStockDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./TruckedStockDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TruckedStockDetails.vue?vue&type=style&index=0&id=fbdcc4d8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fbdcc4d8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TruckedStockDetails.vue?vue&type=style&index=0&id=fbdcc4d8&scoped=true&lang=css&\""],"sourceRoot":""}