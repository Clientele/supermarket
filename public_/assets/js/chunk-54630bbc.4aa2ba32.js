(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54630bbc"],{3653:function(e,s,t){"use strict";t("e992")},e992:function(e,s,t){},f757:function(e,s,t){"use strict";t.r(s);var l=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"vx-row pb-6"},[t("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 "},[t("h2",{staticClass:"font-bold",staticStyle:{"line-height":"48px !important",display:"flex","vertical-align":"middle !important"}},[t("vs-icon",{staticClass:"inline pt-2 mr-4",attrs:{size:"32px",icon:"verified_user"}}),e._v("\n        Roles & Permissions\n      ")],1)]),t("div",{staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/4 xl:w-1/4"},[t("vs-button",{attrs:{color:"#c38e70",icon:"add_circle",type:"filled"},on:{click:function(s){return e.showRoleNameDialog()}}},[e._v("Add Role")])],1)]),t("div",{staticClass:"good-outlined-card px-6 py-6"},[t("div",{staticClass:"vx-row"},e._l(e.roles,(function(s,l){return t("div",{key:l,staticClass:"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/4 xl:w-1/4 mb-6",on:{click:function(t){return e.viewRoleDetails(s)}}},[t("vx-card",{staticClass:"overflow-hidden"},[t("div",{attrs:{slot:"no-body"},slot:"no-body"},[t("div",{staticClass:"p-6",class:{"flex justify-between flex-row-reverse items-center":!0,"text-center":!1,"pb-0":!1}},[t("feather-icon",{staticClass:"p-3 inline-flex rounded-full",class:["text-success",{"mb-4":!1}],style:{background:"rgba(var(--vs-success),.15)"},attrs:{icon:"UsersIcon"}}),t("div",{staticClass:"truncate"},[t("h5",{staticClass:"mb-1 "},[e._v(e._s(s.name))]),t("span",[e._v(e._s(s.member_count)+" Users")]),t("br"),t("span",[e._v(e._s(s.role_permissions.length)+" Permissions")])])],1)])])],1)})),0)]),t("vs-prompt",{attrs:{title:"Role Name","accept-text":"Save","cancel-text":"Cancel",color:"#118ab2",active:e.roleNameForm},on:{cancel:function(s){e.selectedRole.name=""},accept:function(s){return e.addNewRole()},"update:active":function(s){e.roleNameForm=s}}},[t("div",{staticClass:"con-exemple-prompt"},[t("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Role","vs-placeholder":"Role"},model:{value:e.selectedRole.name,callback:function(s){e.$set(e.selectedRole,"name",s)},expression:"selectedRole.name"}})],1)]),t("vs-popup",{attrs:{fullscreen:"",title:e.selectedRole.name,active:e.roleDetailsDialog},on:{close:function(s){return e.closeRole()},"update:active":function(s){e.roleDetailsDialog=s}}},[t("div",[t("vx-card",{staticClass:"mt-base",attrs:{"no-shadow":"","card-border":""}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full"},[t("div",{staticClass:"flex items-end px-3"},[t("feather-icon",{staticClass:"mr-2",attrs:{svgClasses:"w-6 h-6",icon:"LockIcon"}}),t("span",{staticClass:"font-medium text-lg leading-none"},[e._v("Permissions")])],1),t("vs-divider")],1)]),t("div",{staticClass:"block overflow-x-auto"},[t("table",{staticClass:"w-full"},[t("tr",e._l(["Module"],(function(s){return t("th",{key:s,staticClass:"font-semibold text-base text-left px-3 py-2"},[e._v(e._s(s)+"\n              ")])})),0),e._l(e.permissionsDataModel,(function(s,l){return t("tr",{key:l},[t("td",{staticClass:"px-3 py-2"},[e._v(e._s(l))]),e._l(s,(function(l,o){return t("td",{key:o+l,staticClass:"px-3 py-2"},[t("div",{staticClass:"flex "},[t("vs-checkbox",{model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"values[name]"}}),e._v("    "+e._s(o)+"\n                ")],1)])}))],2)}))],2)])]),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full"},[t("div",{staticClass:"mt-8 flex flex-wrap items-center  "},[t("div",{staticClass:"flex-grow"},[t("vs-button",{staticClass:"mr-6",attrs:{type:"border",color:"warning"},on:{click:function(s){e.roleDetailsDialog=!1}}},[e._v("Cancel")]),t("vs-button",{staticClass:"ml-auto mt-2",attrs:{color:"success"},on:{click:function(s){return e.updateRolePermissions()}}},[e._v("Save Changes")])],1),t("vs-button",{attrs:{color:"danger"},on:{click:function(s){return e.confirmRoleRemoval()}}},[e._v("Delete Role")])],1)])])],1)])],1)},o=[],i=(t("7f7f"),t("6762"),t("2fdb"),t("bb36")),a={components:{},data:function(){return{roleNameForm:!1,roles:[],roleDetailsDialog:!1,selectedRole:{id:"",name:"",role_permissions:[]},permissionsDataModel:{},statusOptions:[{label:"Active",value:"active"},{label:"Blocked",value:"blocked"},{label:"Deactivated",value:"deactivated"}],roleOptions:[{label:"Admin",value:"admin"},{label:"User",value:"user"},{label:"Staff",value:"staff"}]}},methods:{showRoleNameDialog:function(){this.selectedRole={},this.selectedRole.role_permissions=[],this.roleNameForm=!0},viewRoleDetails:function(e){this.selectedRole=e,this.roleDetailsDialog=!0,console.log(JSON.stringify(this.selectedRole.role_permissions)),this.permissionsDataModel={Users:{view:this.selectedRole.role_permissions.includes("View Users"),create:this.selectedRole.role_permissions.includes("Create Users"),update:this.selectedRole.role_permissions.includes("Update Users"),delete:this.selectedRole.role_permissions.includes("Delete Users")},Vendors:{View:!1,Register:!1,Update:!1,Remove:!1},Products:{View:!1,Add:!1,Update:!1,Remove:!1},"Product Categories":{View:!1,Add:!1,Update:!1,Delete:!1},Inventory:{"View Stock":!1,"Issue stock":!1,Receive:!1,Remove:!1},Depots:{View:!1,Add:!1,Update:!1,Remove:!1},Vehicles:{View:!1,Add:!1,Update:!1,Remove:!1},Addresses:{View:!1,Create:!1,Update:!1,Remove:!1},"Reports module":{View:!1}}},closeRole:function(){this.roleDetailsDialog=!1},addNewRole:function(){var e=this;i["a"].post("/config/staff/role/add",{name:this.selectedRole.name,permissions:this.selectedRole.role_permissions}).then((function(s){console.log(JSON.stringify(s.data)),e.roles=s.data.payload.roles,e.selectedRole.name="",e.selectedRole.role_permissions=[],e.fetchRoles()})).catch((function(e){console.log(e)}))},updateRolePermissions:function(){var e=this,s=[];s.push(this.permissionsDataModel.users.view?"View Users":null),s.push(this.permissionsDataModel.users.create?"Create Users":null),s.push(this.permissionsDataModel.users.update?"Update Users":null),s.push(this.permissionsDataModel.users.delete?"Delete Users":null),s=s.filter((function(e){return null!=e})),console.log(JSON.stringify(s)),i["a"].post("/config/staff/role/update",{role_name:this.selectedRole.name,permissions:s}).then((function(s){e.roleDetailsDialog=!1,e.fetchRoles()})).catch((function(e){console.log(e)})),this.$vs.notify({color:"success",title:"Success",text:"Role Updated"})},confirmRoleRemoval:function(){this.roleDetailsDialog=!1,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to remove this role",accept:this.removeRole})},removeRole:function(){var e=this;i["a"].post("/config/staff/role/remove",{name:this.selectedRole.name}).then((function(s){e.fetchRoles(),e.roleDetailsDialog=!1})).catch((function(e){console.log(e)})),this.$vs.notify({color:"success",title:"Success",text:"Role Removed"})},fetchRoles:function(){var e=this;i["a"].get("/resources/staff/roles/full").then((function(s){e.roles=s.data.payload.roles})).catch((function(e){console.log(e)}))}},created:function(){this.fetchRoles()}},n=a,c=(t("3653"),t("2877")),r=Object(c["a"])(n,l,o,!1,null,"053c1d6c",null);s["default"]=r.exports}}]);
//# sourceMappingURL=chunk-54630bbc.4aa2ba32.js.map