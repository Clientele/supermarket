(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ce5ac54"],{2567:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var n=s("41cb");function i(t){switch(t){case 400:return"Server could not understand the request";case 401:return"You have not logged in";case 402:return"Payment required";case 403:return"Resource is forbbidden";case 404:return"URL/Resource Not found";case 405:return"Request method not allowed";case 406:return"Not Acceptable";case 407:return"Proxy authentication required";case 408:return"Request timeout";case 413:return"Payload Too Large";case 415:return"Unsupported Media Type";case 413:return"Payload Too Large";case 422:return"Could not process request";case 429:return"Too Many Requests";case 500:return"Internal Server Error";case 504:return"Gateway Timeout";case 504:return"Network Authentication Required";default:return"Error Code:"+t}}function o(t){if(t.response){if(console.log(JSON.stringify(t.response.data.message)),401==t.response.status)return console.log("redirecting...."),n["a"].push("/login").catch((function(){})),"Not logged in";var e=t.response.data?t.response.data.message:t.response.message;return e+" -"+i(t.response.status)}return console.log(t),"An error occurred"}},"5c8a":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container mb-6"},[s("vs-icon",{staticClass:"mr-2",attrs:{icon:"home_work",size:"large",color:"primary"}}),s("h1",{staticClass:"mr-6"},[t._v("\n      Sales Zones\n    ")]),s("vs-button",{staticClass:"mr-4 vs-con-loading__container",attrs:{icon:"add",id:"depotLoading"},on:{click:function(e){return t.showZoneForm()}}},[t._v("Add Zone")])],1),s("vx-card",[s("div",{staticClass:"px-6 py-6 rounded",staticStyle:{border:"1px solid #e5e5e5"}},[s("vs-table",{attrs:{stripe:"",data:t.zones},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,(function(e,i){return s("vs-tr",{key:i},[s("vs-td",{attrs:{data:n[i].zone_name}},[t._v("\n              "+t._s(n[i].zone_name)+"\n            ")]),s("vs-td",{attrs:{data:n[i].created_at}},[t._v("\n              "+t._s(n[i].created_at)+"\n            ")]),s("vs-td",{attrs:{data:n[i].id}},[s("vs-button",{staticClass:"mr-4",attrs:{type:"border",color:"secondary",size:"small"},on:{click:function(e){return t.showZoneDistricts(n[i])}}},[t._v("Open")]),s("vs-button",{staticClass:"mr-4",attrs:{type:"border",size:"small"},on:{click:function(e){return t.showZoneForm(n[i])}}},[t._v("Edit")]),s("vs-button",{staticClass:"mr-4",attrs:{type:"border",color:"danger",size:"small"},on:{click:function(e){return t.confirmZoneRemoval(n[i])}}},[t._v("Remove")])],1)],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[t._v("Region Name")]),s("vs-th",[t._v("Added")]),s("vs-th",[t._v("Action")])],1)],2)],1),s("vs-prompt",{attrs:{title:"Zone Name","accept-text":"Save","cancel-text":"Cancel",color:"secondary",active:t.zoneFormDialog},on:{cancel:function(e){t.zoneInstance={}},accept:function(e){return t.saveSalesZone()},"update:active":function(e){t.zoneFormDialog=e}}},[s("div",[s("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Region Name"},model:{value:t.zoneInstance.zone_name,callback:function(e){t.$set(t.zoneInstance,"zone_name",e)},expression:"zoneInstance.zone_name"}})],1)]),s("vs-popup",{attrs:{fullscreen:"",title:"Districts",active:t.districtsVisible},on:{close:function(e){return t.closeDistricts()},"update:active":function(e){t.districtsVisible=e}}},[s("div",{staticClass:"px-6 py-6 rounded",staticStyle:{border:"1px solid #e5e5e5"}},[s("div",{staticClass:"flex flex-wrap mb-4"},[s("h4",{staticClass:"mb-4 mr-6 mt-2"},[t._v(" "+t._s(t.zoneInstance.zone_name)+" Districts")]),s("div",{staticClass:"flex-grow"},[s("vs-button",{attrs:{icon:"add"},on:{click:function(e){return t.showDistrictForm()}}},[t._v("Add District")])],1)]),s("vs-table",{attrs:{stripe:"",data:t.districts},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,(function(e,i){return s("vs-tr",{key:i},[s("vs-td",{attrs:{data:n[i].district_name}},[t._v("\n                "+t._s(n[i].district_name)+"\n              ")]),s("vs-td",{attrs:{data:n[i].created_at}},[t._v("\n                "+t._s(n[i].created_at)+"\n              ")]),s("vs-td",{attrs:{data:n[i].id}},[s("vs-button",{staticClass:"mr-4",attrs:{type:"border",color:"danger",size:"small"},on:{click:function(e){return t.confirmDistrictRemoval(n[i])}}},[t._v("Remove")])],1)],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[t._v("District Name")]),s("vs-th",[t._v("Added")]),s("vs-th",[t._v("Action")])],1)],2)],1)]),s("vs-popup",{attrs:{title:"Select Districts",color:"secondary",fullscreen:"",active:t.districtsFormVisible},on:{accept:function(e){return t.updateZone()},close:function(e){return t.closeRegionsForm()},"update:active":function(e){t.districtsFormVisible=e}}},[s("div",[s("div",{staticClass:"vx-row"},t._l(t.allDistricts,(function(e,n){return s("div",{key:n,staticClass:"vx-col md:w-1/4 w-1/6 px-6 py-6"},[s("vs-checkbox",{attrs:{"vs-value":e.id},model:{value:t.selectedDistricts,callback:function(e){t.selectedDistricts=e},expression:"selectedDistricts"}},[t._v(t._s(e.district_name))])],1)})),0),s("div",{staticClass:"vx-row px-6"},[s("vs-button",{attrs:{color:"secondary"},on:{click:t.updateZone}},[t._v("Update Zone")])],1)])])],1)],1)},i=[],o=s("bb36"),r=s("2567"),c={data:function(){return{zones:[],zoneInstance:{id:null,zone_name:null,country_id:1},zoneFormDialog:!1,districtsVisible:!1,districtsFormVisible:!1,districtInstance:{id:null,district_name:null,zone_id:null},districts:[],selectedDistricts:[],allDistricts:[],countries:[{name:"Tanzania"},{name:"Kenya"},{name:"Uganda"},{name:"Rwanda"},{name:"Burundi"},{name:"Congo"}]}},methods:{fetchZones:function(){var t=this;o["a"].get("/resources/addresses/zones").then((function(e){t.zones=e.data.payload.zones})).catch((function(t){console.log(t)}))},showZoneForm:function(t){this.zoneInstance=t||{},this.zoneFormDialog=!0},saveSalesZone:function(){var t=this;o["a"].post("/config/addresses/zone/add",this.zoneInstance).then((function(e){t.zoneFormDialog=!1,t.fetchZones(),t.happilyNotify("Zone Added")})).catch((function(e){console.log(e),t.handleApiError(e)}))},confirmZoneRemoval:function(t){this.zoneInstance=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to remove "+this.zoneInstance.zone_name,accept:this.removeZone})},removeZone:function(){var t=this;o["a"].post("/config/addresses/zone/remove",{id:this.zoneInstance.id}).then((function(e){t.fetchZones()})).catch((function(t){console.log(t)}))},showZoneDistricts:function(t){var e=this;t&&(this.zoneInstance=t),this.districtsVisible=!0;var s="/resources/addresses/zone/districts?zone_id="+this.zoneInstance.id;console.log(s),o["a"].get(s).then((function(t){e.districts=t.data.payload.districts})).catch((function(t){console.log(t)}))},showDistrictForm:function(){this.selectedDistricts=this.districts.map((function(t){return t.id})),this.districtsFormVisible=!0,this.districtsVisible=!1},updateZone:function(){var t=this;o["a"].post("/config/addresses/zone/update",{zone_id:this.zoneInstance.id,district_ids:this.selectedDistricts}).then((function(e){t.districtsFormVisible=!1,t.showZoneDistricts(),t.happilyNotify("Updated"),t.selectedDistricts=[]})).catch((function(e){console.log(e),t.handleApiError(e)}))},confirmDistrictRemoval:function(t){this.districtsVisible=!1,this.districtInstance=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to remove "+this.districtInstance.district_name,accept:this.removeDistrict})},removeDistrict:function(){var t=this;o["a"].post("/config/addresses/zone/district/remove",{id:this.districtInstance.id}).then((function(e){t.showZoneDistricts()})).catch((function(t){console.log(t)}))},closeDistricts:function(){this.districtsVisible=!1,this.zoneInstance={}},handleApiError:function(t){this.$vs.notify({title:"Error",text:Object(r["a"])(t),iconPack:"feather",icon:"icon-alert-circle",color:"danger"})},happilyNotify:function(t){this.$vs.notify({title:"Success",text:t,color:"success"})},fetchDistricts:function(){var t=this;o["a"].get("/resources/addresses/districts").then((function(e){t.allDistricts=e.data.payload.districts})).catch((function(t){console.log(t)}))}},created:function(){this.fetchZones(),this.fetchDistricts()}},a=c,d=s("2877"),l=Object(d["a"])(a,n,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-8ce5ac54.7d91724f.js.map